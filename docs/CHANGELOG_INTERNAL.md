## 2026-02-08 Рђћ T-003: лАл┐Лђл░л▓лЙЛЄлйлИл║ workflows + л┐ЛђлЙл▓лхЛђл║л░ outputs

(T-003) лљл▓ЛѓлЙл│лхлйлхЛђл░ЛєлИЛЈ WORKFLOWS_REFERENCE.md ЛЄлхЛђлхли tools/gen_workflows_reference.py (л┐л░ЛђЛЂлИлйл│ workflows/*.json).

**лдлхл╗Лї:** лЌл░ЛёлИл║ЛЂлИЛђлЙл▓л░ЛѓЛї ЛЂл┐лИЛЂлЙл║ workflows лИ л┐лЙл┤л│лЙЛѓлЙл▓лИЛѓЛї reference-л┤лЙл║ЛЃл╝лхлйЛѓл░ЛєлИЛј. лЪЛђлЙл▓лхЛђлИЛѓЛї Лѓлхл║ЛЃЛЅлИл╣ outputs resolver л▓ comfy/client.py лИ л┐ЛђлИ лйлхлЙл▒ЛЁлЙл┤лИл╝лЙЛЂЛѓлИ ЛЃл╗ЛЃЛЄЛѕлИЛѓЛї л╗лЙл│лИЛђлЙл▓л░лйлИлх.

**лблИл║лхЛѓ:** T-003

**лўлил╝лхлйлхлйлЙ/л┤лЙл▒л░л▓л╗лхлйлЙ:**
- docs/WORKFLOWS_REFERENCE.md (ЛЂлЙлил┤л░лй, л░л▓ЛѓлЙЛЂл┐лИЛЂлЙл║ workflows)
- docs/CHANGELOG_INTERNAL.md (ЛЇЛѓл░ лил░л┐лИЛЂЛї)

**лЪЛђлИл╝лхЛЄл░лйлИлх:** лћлхЛѓл░л╗ЛїлйлЙлх лЙл┐лИЛЂл░лйлИлх л▓ЛЁлЙл┤лЙл▓/л▓ЛІЛЁлЙл┤лЙл▓ л║л░лХл┤лЙл│лЙ workflow л▒ЛЃл┤лхЛѓ л┤лЙл┐лИЛЂл░лйлЙ л▓ WORKFLOWS_REFERENCE.md л┐лЙЛЂл╗лх л░лйл░л╗лИлил░ JSON.

---

# CHANGELOG_INTERNAL (img_bot)

лаРђЊлАЛЊлАлѓлалЁла┬░ла┬╗ лаРђЎлалјлаРђбламљ лалєлалЁлАЛЊлАРђџлАлѓла┬хлалЁлалЁлаЛЉлАРђд лаЛЉла┬илаЛўла┬хлалЁла┬хлалЁлаЛЉлаРёќ лаЛЌлАлѓлаЛЋла┬хлаЛћлАРђџла┬░. лаРђЎлАлЃла┬х ла┬ила┬░лаЛЌлаЛЉлАлЃлаЛЉ лалЁла┬░ лАлѓлАЛЊлАлЃлАлЃлаЛћлаЛЋлаЛў.

**лаЛЪлАлѓла┬░лалєлаЛЉла┬╗лаЛЋ:** лаЛћла┬░ла┬ХламЉлАРђ╣лаРёќ лаЛћлаЛЋлаЛўлаЛўлаЛЉлАРђџ лАлЃ лаЛЉла┬илаЛўла┬хлалЁла┬хлалЁлаЛЉла┬хлаЛў лаЛћлаЛЋламЉла┬░ лаЛЏлаРђўлалЄлаРђћлаЛњлаЛю лАлЃлаЛЋламЉла┬хлАлѓла┬Хла┬░лАРђџлАлі ла┬ила┬░лаЛЌлаЛЉлАлЃлАлі ла┬иламЉла┬хлАлЃлАлі.

---

## 2025-01-17 Рђћ T-003.2: лБЛЂлИл╗лхлйлЙ л╗лЙл│лИЛђлЙл▓л░лйлИлх outputs + CI-check л░л║ЛѓЛЃл░л╗ЛїлйлЙЛЂЛѓлИ WORKFLOWS_REFERENCE

**лдлхл╗Лї:** лБл╗ЛЃЛЄЛѕлИЛѓЛї л┤лИл░л│лйлЙЛЂЛѓлИл║ЛЃ л┐ЛђлИ л▓ЛІл▒лЙЛђлх output Лёл░л╣л╗л░ лИли ComfyUI, л┤лЙл▒л░л▓лИЛѓЛї л░л▓ЛѓлЙл╝л░ЛѓлИЛЄлхЛЂл║ЛЃЛј л┐ЛђлЙл▓лхЛђл║ЛЃ л░л║ЛѓЛЃл░л╗ЛїлйлЙЛЂЛѓлИ ЛЂл┐Лђл░л▓лЙЛЄлйлИл║л░ workflows.

**лблИл║лхЛѓ:** T-003.2

**лъл▒лйлЙл▓л╗лхлйлЙ:**

- `comfy/client.py` Рђћ ЛЂЛѓЛђЛЃл║ЛѓЛЃЛђлйлЙлх л╗лЙл│лИЛђлЙл▓л░лйлИлх л┐ЛђлИ л┐л░ЛђЛЂлИлйл│лх outputs
  - `_get_file_priority()` Рђћ л┤лЙл▒л░л▓л╗лхлйЛІ ЛЈл▓лйЛІлх л║лЙл╝л╝лхлйЛѓл░ЛђлИлИ л┐Лђл░л▓лИл╗ л┐ЛђлИлЙЛђлИЛѓлхЛѓл░
    * video (mp4/webm/mov/avi/mkv) Рєњ 0 (TOP)
    * gif Рєњ 1 (л▓ЛІЛЂлЙл║лИл╣ л┐ЛђлИлЙЛђлИЛѓлхЛѓ)
    * image (png/jpg/jpeg/webp/bmp) Рєњ 2
    * л┐ЛђлЙЛЄлхлх Рєњ 3
  - `_extract_first_file()` Рђћ л┤лхЛѓл░л╗ЛїлйлЙлх л╗лЙл│лИЛђлЙл▓л░лйлИлх (INFO/DEBUG):
    * ­ЪЊд Parsing outputs: ЛЂл║лЙл╗Лїл║лЙ лйлЙл┤, л║л░л║лИлх node_ids
    * ­ЪЊІ Found N candidate(s): ЛЂл┐лИЛЂлЙл║ л▓ЛЂлхЛЁ Лёл░л╣л╗лЙл▓ ЛЂ priority, size, type
    * РюЊ Selected output: ЛёлИлйл░л╗ЛїлйЛІл╣ л▓ЛІл▒лЙЛђ + reason (type=video/gif/image/other, size)
    * РЮї лЪЛђлИ лЙЛѓЛЂЛЃЛѓЛЂЛѓл▓лИлИ: warning + available keys + л┐лхЛђл▓ЛІлх 500 ЛЂлИл╝л▓лЙл╗лЙл▓ JSON outputs
  - лЪЛђл░л▓лИл╗лЙ л▓ЛІл▒лЙЛђл░: ЛЂлЙЛђЛѓлИЛђлЙл▓л║л░ л┐лЙ (priority asc, size desc) Рђћ л▓лИл┤лхлЙ > gif > лИлилЙл▒Лђл░лХлхлйлИлх, л▓лйЛЃЛѓЛђлИ ЛѓлИл┐л░ л▒лЙл╗ЛїЛѕлх = л╗ЛЃЛЄЛѕлх

**лћлЙл▒л░л▓л╗лхлйлЙ:**

- `.github/workflows/docs-workflows-reference.yml` Рђћ лйлЙл▓ЛІл╣ GitHub Actions workflow
  - лЌл░л┐ЛЃЛЂл║л░лхЛѓЛЂЛЈ л┐ЛђлИ push/PR лйл░ master/main
  - лЪлхЛђлхл│лхлйлхЛђлИЛђЛЃлхЛѓ `docs/WORKFLOWS_REFERENCE.md` ЛЄлхЛђлхли `python tools/gen_workflows_reference.py`
  - лЪЛђлЙл▓лхЛђЛЈлхЛѓ л░л║ЛѓЛЃл░л╗ЛїлйлЙЛЂЛѓЛї: `git diff --exit-code docs/WORKFLOWS_REFERENCE.md`
  - лЋЛЂл╗лИ diff лйл░л╣л┤лхлй Рєњ CI falls ЛЂ л┐лЙлйЛЈЛѓлйЛІл╝ ЛЂлЙлЙл▒ЛЅлхлйлИлхл╝
  - лЊл░Лђл░лйЛѓлИЛђЛЃлхЛѓ ЛЄЛѓлЙ ЛЂл┐Лђл░л▓лЙЛЄлйлИл║ workflows л▓ЛЂлхл│л┤л░ ЛЂлИлйЛЁЛђлЙлйлИлилИЛђлЙл▓л░лй ЛЂ workflows/*.json

**лалхлиЛЃл╗ЛїЛѓл░Лѓ:**

- лЏлЙл│лИЛђлЙл▓л░лйлИлх outputs л╝л░л║ЛЂлИл╝л░л╗ЛїлйлЙ л┤лхЛѓл░л╗ЛїлйлЙ (л┐лЙл╝лЙл│л░лхЛѓ л┐ЛђлИ л┤лхл▒л░л│лх OOM, л┐ЛЃЛЂЛѓЛІЛЁ outputs, лйлхл┐Лђл░л▓лИл╗ЛїлйлЙл│лЙ л▓ЛІл▒лЙЛђл░ Лёл░л╣л╗л░)
- CI л░л▓ЛѓлЙл╝л░ЛѓлИЛЄлхЛЂл║лИ л┐ЛђлЙл▓лхЛђЛЈлхЛѓ ЛЄЛѓлЙ Лђл░лиЛђл░л▒лЙЛѓЛЄлИл║ лйлх лил░л▒ЛІл╗ лЙл▒лйлЙл▓лИЛѓЛї WORKFLOWS_REFERENCE.md л┐ЛђлИ л┤лЙл▒л░л▓л╗лхлйлИлИ/лИлил╝лхлйлхлйлИлИ workflow
- лЪЛђлИ лил░л┐ЛђлЙЛЂлх л╗лЙл│лЙл▓ л▓лИл┤лйЛІ: л║л░лйл┤лИл┤л░ЛѓЛІ, л┐ЛђлИлЙЛђлИЛѓлхЛѓЛІ, ЛёлИлйл░л╗ЛїлйЛІл╣ л▓ЛІл▒лЙЛђ ЛЂ л┐ЛђлИЛЄлИлйлЙл╣

---

## 2026-02-08 Рђћ T-003: лАл┐Лђл░л▓лЙЛЄлйлИл║ workflows + л┐ЛђлЙл▓лхЛђл║л░ outputs

(T-003) лљл▓ЛѓлЙл│лхлйлхЛђл░ЛєлИЛЈ WORKFLOWS_REFERENCE.md ЛЄлхЛђлхли tools/gen_workflows_reference.py (л┐л░ЛђЛЂлИлйл│ workflows/*.json).

**лдлхл╗Лї:** лЌл░ЛёлИл║ЛЂлИЛђлЙл▓л░ЛѓЛї ЛЂл┐лИЛЂлЙл║ workflows лИ л┐лЙл┤л│лЙЛѓлЙл▓лИЛѓЛї reference-л┤лЙл║ЛЃл╝лхлйЛѓл░ЛєлИЛј. лЪЛђлЙл▓лхЛђлИЛѓЛї Лѓлхл║ЛЃЛЅлИл╣ outputs resolver л▓ comfy/client.py лИ л┐ЛђлИ лйлхлЙл▒ЛЁлЙл┤лИл╝лЙЛЂЛѓлИ ЛЃл╗ЛЃЛЄЛѕлИЛѓЛї л╗лЙл│лИЛђлЙл▓л░лйлИлх.

**лблИл║лхЛѓ:** T-003

**лўлил╝лхлйлхлйлЙ/л┤лЙл▒л░л▓л╗лхлйлЙ:**
- docs/WORKFLOWS_REFERENCE.md (ЛЂлЙлил┤л░лй, ЛЂЛѓл░ЛѓлИЛЄлхЛЂл║лИл╣ ЛЂл┐лИЛЂлЙл║ workflows)
- docs/CHANGELOG_INTERNAL.md (ЛЇЛѓл░ лил░л┐лИЛЂЛї)

**лЪЛђлИл╝лхЛЄл░лйлИлх:** лћлхЛѓл░л╗ЛїлйлЙлх лЙл┐лИЛЂл░лйлИлх л▓ЛЁлЙл┤лЙл▓/л▓ЛІЛЁлЙл┤лЙл▓ л║л░лХл┤лЙл│лЙ workflow л▒ЛЃл┤лхЛѓ л┤лЙл┐лИЛЂл░лйлЙ л▓ WORKFLOWS_REFERENCE.md л┐лЙЛЂл╗лх л░лйл░л╗лИлил░ JSON.

---

# CHANGELOG_INTERNAL (img_bot)

лаРђЊлАЛЊлАлѓлалЁла┬░ла┬╗ лаРђЎлалјлаРђбламљ лалєлалЁлАЛЊлАРђџлАлѓла┬хлалЁлалЁлаЛЉлАРђд лаЛЉла┬илаЛўла┬хлалЁла┬хлалЁлаЛЉлаРёќ лаЛЌлАлѓлаЛЋла┬хлаЛћлАРђџла┬░. лаРђЎлАлЃла┬х ла┬ила┬░лаЛЌлаЛЉлАлЃлаЛЉ лалЁла┬░ лАлѓлАЛЊлАлЃлАлЃлаЛћлаЛЋлаЛў.

**лаЛЪлАлѓла┬░лалєлаЛЉла┬╗лаЛЋ:** лаЛћла┬░ла┬ХламЉлАРђ╣лаРёќ лаЛћлаЛЋлаЛўлаЛўлаЛЉлАРђџ лАлЃ лаЛЉла┬илаЛўла┬хлалЁла┬хлалЁлаЛЉла┬хлаЛў лаЛћлаЛЋламЉла┬░ лаЛЏлаРђўлалЄлаРђћлаЛњлаЛю лАлЃлаЛЋламЉла┬хлАлѓла┬Хла┬░лАРђџлАлі ла┬ила┬░лаЛЌлаЛЉлАлЃлАлі ла┬иламЉла┬хлАлЃлАлі.

---

## 2026-02-08 л▓лѓРђЮ T-002: Copilot-safe git ла┬ила┬░лАРђ░лаЛЉлАРђџла┬░ лАлѓла┬хлаЛЌлаЛЋла┬илаЛЉлАРђџлаЛЋлАлѓлаЛЉлАлЈ

**ла┬дла┬хла┬╗лАлі:** лаЛќла┬░лАлѓла┬░лалЁлАРђџлаЛЉлАлѓлаЛЋлалєла┬░лАРђџлАлі лАРђАлАРђџлаЛЋ лалє GitHub лалЁлаЛЉлаЛћлаЛЋлаЛќламЉла┬░ лалЁла┬х лаЛЌлаЛЋлаЛЌла┬░ламЉлАРђўлАРђџ "лаЛЌлАЛЊлАлЃлАРђџлаЛЋлаРёќ" лАлѓла┬хлаЛЌлаЛЋла┬илаЛЉлАРђџлаЛЋлАлѓлаЛЉлаРёќ лАРђџлаЛЋла┬╗лАлілаЛћлаЛЋ лАлЃ README/LICENSE.

**лаЛълаЛЉлаЛћла┬хлАРђџ:** T-002

**лаРђЮлаЛЋла┬▒ла┬░лалєла┬╗ла┬хлалЁлаЛЋ:**

- `.githooks/pre-commit` л▓лѓРђЮ Python pre-commit hook
  - лаРђўла┬╗лаЛЋлаЛћлаЛЉлАлѓлАЛЊла┬хлАРђџ лаЛћлаЛЋлаЛўлаЛўлаЛЉлАРђџлАРђ╣ лАлЃ лаЛълаЛЏлаРђ║ла┬глаЛЎлаЛЏ README/LICENSE/лаЛўла┬хлАРђџла┬░-лАРђъла┬░лаРёќла┬╗ла┬░лаЛўлаЛЉ
  - лаРђћла┬░лаЛЌлАлѓла┬хлАРђ░ла┬░ла┬хлАРђџ .md лАРђъла┬░лаРёќла┬╗лАРђ╣ лалєлалЁла┬х лаЛЌла┬░лаЛЌлаЛћлаЛЉ `docs/`
  - лаЛълАлѓла┬хла┬▒лАЛЊла┬хлАРђџ лаЛЋла┬▒лалЁлаЛЋлалєла┬╗ла┬хлалЁлаЛЉлАлЈ `docs/CHANGELOG_INTERNAL.md` лаЛЌлАлѓлаЛЉ лаЛЉла┬илаЛўла┬хлалЁла┬хлалЁлаЛЉлаЛЉ лаЛћлаЛЋламЉла┬░
  - ла┬ала┬░ла┬▒лаЛЋлАРђџла┬░ла┬хлАРђџ лалЁла┬░ Windows/macOS/Linux

- `.github/workflows/repo-sanity.yml` л▓лѓРђЮ GitHub Actions ламЉла┬╗лАлЈ CI
  - лаЛЪлАлѓлаЛЋлалєла┬хлАлѓлАлЈла┬хлАРђџ лалЁла┬░ла┬╗лаЛЉлАРђАлаЛЉла┬х лалєлАлЃла┬хлАРђд ламЉлаЛЉлАлѓла┬хлаЛћлАРђџлаЛЋлАлѓлаЛЉлаРёќ: `bot/`, `comfy/`, `utils/`, `workflows/`, `docs/`, `config/`
  - лаЛЪлАлѓлаЛЋлалєла┬хлАлѓлАлЈла┬хлАРђџ лалЁла┬░ла┬╗лаЛЉлАРђАлаЛЉла┬х `docs/CHANGELOG_INTERNAL.md`
  - лаЛЪлАлѓлаЛЋлалєла┬хлАлѓлАлЈла┬хлАРђџ лАРђАлАРђџлаЛЋ лАлѓла┬хлаЛЌлаЛЋ лалЁла┬х "лаЛЌлАЛЊлАлЃлАРђџлаЛЋлаРёќ" (ла┬хлАлЃлАРђџлАлі лаЛћлаЛЋламЉ лалє `bot/` лаЛЉла┬╗лаЛЉ `main.py`)
  - лаРђћла┬░лаЛЌлАЛЊлАлЃлаЛћла┬░ла┬хлАРђџлАлЃлАлЈ лаЛЌлАлѓлаЛЉ push/PR лалЁла┬░ master/main

- `.gitignore` л▓лѓРђЮ лаЛЋла┬▒лалЁлаЛЋлалєла┬╗ла┬хлалЁ
  - лаРђЮлаЛЋла┬▒ла┬░лалєла┬╗ла┬хлалЁ лаЛЉлаЛќлалЁлаЛЋлАлѓ `.vs/` (Visual Studio)
  - лаРђЮлаЛЋла┬▒ла┬░лалєла┬╗ла┬хлалЁлАРђ╣ лАРђџлаЛЉлаЛЌлаЛЋлалєлАРђ╣ла┬х Python-лАРђъла┬░лаРёќла┬╗лАРђ╣: `__pycache__/`, `*.pyc`, `*.egg-info/`

- `docs/CHANGELOG_INTERNAL.md` л▓лѓРђЮ лАлїлАРђџлаЛЋлАРђџ лАРђъла┬░лаРёќла┬╗
  - лаРђЊлАЛЊлАлѓлалЁла┬░ла┬╗ лалєлАлЃла┬хлАРђд лалєлалЁлАЛЊлАРђџлАлѓла┬хлалЁлалЁлаЛЉлАРђд лаЛЉла┬илаЛўла┬хлалЁла┬хлалЁлаЛЉлаРёќ

**лаЛЎла┬░лаЛћ лаЛЉлАлЃлаЛЌлаЛЋла┬╗лАліла┬илаЛЋлалєла┬░лАРђџлАлі:**

1. лаЛЪла┬хлАлѓла┬хламЉ лаЛћлаЛЋлаЛўлаЛўлаЛЉлАРђџлаЛЋлаЛў лАЛЊла┬▒ла┬хламЉлаЛЉлАлЃлАлі лАРђАлАРђџлаЛЋ лалє staging ла┬хлАлЃлАРђџлАлі лаРђЎлалјлаРђб лАРђъла┬░лаРёќла┬╗лАРђ╣:
   ```sh
   git status
   git add -A
   ```

2. лаРђблАлЃла┬╗лаЛЉ лАРђџлАРђ╣ лаЛўла┬хлалЁлАлЈла┬хлАРѓглАлі лаЛћлаЛЋламЉ (лалЁла┬х лАРђџлаЛЋла┬╗лАлілаЛћлаЛЋ ламЉлаЛЋлаЛћлАЛЊлаЛўла┬хлалЁлАРђџла┬░лАРђалаЛЉлАлІ):
   - лаЛЏла┬▒лалЁлаЛЋлалєлаЛЉла┬╗ лАРђъла┬░лаРёќла┬╗лАРђ╣ лалє `bot/`, `comfy/`, `utils/`, `workflows/`, `config/`, лаЛЉла┬╗лаЛЉ `main.py`?
   - л▓ЛЏЛџ лаЛЏлаРђўлалЄлаРђћлаЛњлаЛълаРђблаРђ║ла┬глаЛюлаЛЏ ламЉлаЛЋла┬▒ла┬░лалєлАлі ла┬ила┬░лаЛЌлаЛЉлАлЃлАлі лалє лАлїлАРђџлаЛЋлАРђџ лАРђъла┬░лаРёќла┬╗ (`docs/CHANGELOG_INTERNAL.md`)

3. Pre-commit hook лАлЃла┬░лаЛў лаЛЌлАлѓлаЛЋлалєла┬хлАлѓлаЛЉлАРђџ лалєлАлЃлАРђў. лаРђблАлЃла┬╗лаЛЉ лАРђАлАРђџлаЛЋ-лАРђџлаЛЋ лалЁла┬х лАРђџла┬░лаЛћ л▓лѓРђЮ лаЛћлаЛЋлаЛўлаЛўлаЛЉлАРђџ ла┬ила┬░ла┬▒ла┬╗лаЛЋлаЛћлаЛЉлАлѓлАЛЊла┬хлАРђџлАлЃлАлЈ лАлЃ лАлѓлАЛЊлАлЃлАлЃлаЛћлаЛЉлаЛў лАлЃлаЛЋлаЛЋла┬▒лАРђ░ла┬хлалЁлаЛЉла┬хлаЛў лаЛЋла┬▒ лаЛЋлАРѓглаЛЉла┬▒лаЛћла┬х.

**лаЛЪлАлѓлаЛЉлАРђАлаЛЉлалЁла┬░:**

лаЛюла┬░ GitHub лАлѓла┬░лалЁлАлілАРѓгла┬х ла┬▒лАРђ╣ла┬╗ла┬░ лАлЃлаЛЉлАРђџлАЛЊла┬░лАРђалаЛЉлАлЈ лаЛћлаЛЋлаЛќламЉла┬░ ла┬ила┬░ла┬╗ла┬хла┬ила┬╗лаЛЋ лАРђџлаЛЋла┬╗лАлілаЛћлаЛЋ README+LICENSE лаЛЉ лАлѓла┬хлаЛЌлаЛЋ лаЛЋлАлЃлАРђџла┬░ла┬╗лАлЃлАлЈ "лаЛЌлАЛЊлАлЃлАРђџлАРђ╣лаЛў". лаЛъла┬хлаЛЌла┬хлАлѓлАлі лАлїлАРђџлаЛЋ лАРђълаЛЉла┬илаЛЉлАРђАла┬хлАлЃлаЛћлаЛЉ лалЁла┬хлалєлаЛЋла┬илаЛўлаЛЋла┬ХлалЁлаЛЋ:
- лаРђ║лаЛЋлаЛћла┬░ла┬╗лАлілалЁлаЛЋ: hook ла┬ила┬░лаЛЌлАлѓла┬хлАРђџлаЛЉлАРђџ лАРђџла┬░лаЛћлаЛЋлаРёќ лаЛћлаЛЋлаЛўлаЛўлаЛЉлАРђџ
- лаЛџла┬░ GitHub: Actions лаЛЌлАлѓлаЛЋлалєла┬хлАлѓлаЛЉлАРђџ лАлЃлАРђџлАлѓлАЛЊлаЛћлАРђџлАЛЊлАлѓлАЛЊ лаЛЉ fail-лалЁла┬хлАРђџ ла┬хлАлЃла┬╗лаЛЉ лАРђАла┬хлаЛќлаЛЋ-лАРђџлаЛЋ лалЁла┬хлАРђџ





